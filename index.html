<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lotomania - Jogos Estratégicos</title>
<style>
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: Arial,sans-serif;
  color: white;
  text-align: center;
  overflow-x: hidden; /* impede rolagem horizontal */
}
body {
  background-image: url('./img/robot.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  padding: 2vh 2vw;
}
#buttons {
  margin-bottom: 2vh;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1vw;
}
button {
  padding: 1vh 2vw;
  margin: 0.5vh 0;
  font-size: 1rem;
  cursor: pointer;
  border-radius: 20px;
  flex: 1 1 120px;
}
.tabela-container {
  display: flex;
  justify-content: center;
  margin: 2vh auto;
  width: 100%;
}
#tabela {
  display: none;
  background: rgba(0,0,0,0.9);
  padding: 1vh 1vw;
  border-radius: 12px;
  flex-direction: column;
  gap: 0.5vh;
  max-width: 100%;
  overflow-x: hidden;
}
.linha-tabela {
  display: flex;
  align-items: center;
  gap: 0.5vw;
  flex-wrap: wrap;
  justify-content: center;
}
.label-tabela {
  width: 20px;
  font-weight: bold;
  text-align: center;
}
.ball-tabela {
  width: 5vw;
  max-width: 35px;
  height: 5vw;
  max-height: 35px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  flex-shrink: 0;
}
.line-A .ball-tabela {background:#FFA500;color:black;}
.line-B .ball-tabela {background:#FFD700;color:black;}
.line-C .ball-tabela {background:#90EE90;color:black;}
.line-D .ball-tabela {background:#00FA9A;color:black;}
.line-E .ball-tabela {background:#32CD32;color:black;}
.line-F .ball-tabela {background:#ADFF2F;color:black;}
.line-G .ball-tabela {background:#FF4500;color:white;}
.line-H .ball-tabela {background:#800080;color:white;}

#container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* grid adaptável */
  gap: 1rem;
  width: 100%;
  margin: 0 auto;
}
.bloco {
  display: contents; /* usa grid do container */
}
.jogo {
  display: flex;
  flex-direction: column;
  gap: 0.5vh;
  border: 2px solid #5ac48d;
  padding: 1vh 1vw;
  border-radius: 8px;
  background: rgba(0,0,0,0.7);
  width: 100%;
  box-sizing: border-box;
}
.linha {
  display: flex;
  gap: 0.3vw;
  align-items: center;
  flex-wrap: wrap;
  justify-content: center;
}
.label {
  width: 20px;
  text-align: center;
  font-weight: bold;
  margin-right: 0.5vw;
}
.ball {
  width: 4vw;
  max-width: 30px;
  height: 4vw;
  max-height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  border: 2px solid transparent;
  transition: all 0.3s;
  flex-shrink: 0;
}
.ball.acerto {border:2px solid #32FF00;animation: glowGreen 1s infinite alternate;}
@keyframes glowGreen {from {box-shadow: 0 0 5px #32FF00;} to {box-shadow: 0 0 20px #32FF00;}}
.line-A .ball {background:#FFA500;color:black;}
.line-B .ball {background:#FFD700;color:black;}
.line-C .ball {background:#90EE90;color:black;}
.line-D .ball {background:#00FA9A;color:black;}
.line-E .ball {background:#32CD32;color:black;}
.line-F .ball {background:#ADFF2F;color:black;}
.line-G .ball {background:#FF4500;color:white;}
.line-H .ball {background:#800080;color:white;}

#numeroContainerWrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 2vh;
  width: 95%;
}
#numeroContainerWrapper div:first-child {
  margin-bottom: 1vh;
  font-weight: bold;
  font-size: 1rem;
}
#numeroContainer {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  max-width: 700px;
  gap: 0.5vw;
  background: rgba(0,0,0,0.5);
  padding: 1vh 1vw;
  border-radius: 12px;
}
.numero {
  width: 7vw;
  max-width: 40px;
  height: 7vw;
  max-height: 40px;
  border: 2px solid white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: text;
  user-select: none;
  background: rgba(0,0,0,0.2);
  color: white;
  font-weight: bold;
  text-align: center;
  font-size: 1rem;
  transition: all 0.3s;
}
.numero.preenchido {border: 2px solid #32FF00;animation: glowGreen 1s infinite alternate;}

/* RESPONSIVO CELULAR */
@media screen and (max-width: 600px) {
  .linha-tabela, .linha {flex-wrap: wrap; justify-content: center; overflow-x: hidden;}
  .ball-tabela, .ball, .numero {
    width: 9vw;
    height: 9vw;
    max-width: 28px;
    max-height: 28px;
    font-size: 0.7rem;
  }
  #container {
    grid-template-columns: 1fr; /* jogos ocupam 100% no celular */
  }
  .jogo {
    width: 100%;
    padding: 0.5vh 1vw;
  }
  button {flex:1 1 80px; font-size:0.85rem; padding:0.6vh 1vw;}
  #numeroContainer {max-width: 90%; gap: 0.3vw;}
}
</style>
</head>
<body>

<div id="buttons">
  <button id="btnGenerate">Gerar Tabela</button>
  <button id="btnClear">Limpar</button>
  <button id="btnComb">Gerar 56 Jogos</button>
  <button id="btnToggleTabela">Mostrar Tabela</button>
  <button id="btnSave">Salvar Jogos</button>
  <button id="btnLoad">Carregar Jogos</button>
</div>

<div id="numeroContainerWrapper">
  <div>Digite o último resultado</div>
  <div id="numeroContainer"></div>
</div>

<div class="tabela-container">
  <div id="tabela"></div>
</div>
<div id="container"></div>

<script>
const letras=["A","B","C","D","E","F","G","H"];
let tabelaNumeros={};
let ultimoResultado=Array(20).fill(null);

function shuffleArray(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
}

function gerarCombinacoes(array,k){
  let results=[];
  function aux(start, comb){
    if(comb.length===k){ results.push([...comb]); return; }
    for(let i=start;i<array.length;i++){
      comb.push(array[i]);
      aux(i+1, comb);
      comb.pop();
    }
  }
  aux(0, []);
  return results;
}

// Criar tabela com números aleatórios
function criarTabela(){
  tabelaNumeros={};
  const numeros=Array.from({length:90},(_,i)=>i+11);
  shuffleArray(numeros);
  let index=0;
  const tabelaDiv=document.getElementById("tabela");
  tabelaDiv.innerHTML="";
  tabelaDiv.style.display="flex";

  letras.forEach(letra=>{
    tabelaNumeros[letra]=[];
    const linhaDiv=document.createElement("div");
    linhaDiv.classList.add("linha-tabela",`line-${letra}`);
    const labelDiv=document.createElement("div");
    labelDiv.classList.add("label-tabela");
    labelDiv.textContent=letra;
    linhaDiv.appendChild(labelDiv);

    let numsLinha = [];
    for(let i=0;i<11;i++){ // 11 números por linha
      if(index<numeros.length) numsLinha.push(numeros[index++]);
    }
    tabelaNumeros[letra] = numsLinha.sort((a,b)=>a-b);

    tabelaNumeros[letra].forEach(n=>{
      const b=document.createElement("div");
      b.classList.add("ball-tabela");
      b.textContent=n;
      linhaDiv.appendChild(b);
    });
    tabelaDiv.appendChild(linhaDiv);
  });

  document.getElementById("container").innerHTML="";
}

function criarInterfaceUltimoResultado(){
  const container=document.getElementById("numeroContainer");
  container.innerHTML="";
  ultimoResultado = Array(20).fill(null);
  for(let i=0;i<20;i++){
    const numDiv=document.createElement("div");
    numDiv.classList.add("numero");
    numDiv.contentEditable = true;
    numDiv.addEventListener("input",()=>{
      let val = parseInt(numDiv.textContent);
      if(!isNaN(val) && val>=1 && val<=100){
        ultimoResultado[i] = val;
        numDiv.classList.add("preenchido");
      } else {
        ultimoResultado[i] = null;
        numDiv.classList.remove("preenchido");
      }
      atualizarAcertos();
    });
    container.appendChild(numDiv);
  }
}

function atualizarAcertos() {
  document.querySelectorAll("#container .jogo").forEach(jogo => {
    let acertosJogo = 0;
    jogo.querySelectorAll(".linha .ball").forEach(b => {
      const num = parseInt(b.textContent);
      if (ultimoResultado.includes(num)) {
        acertosJogo++;
        b.classList.add("acerto");
      } else {
        b.classList.remove("acerto");
      }
    });
    jogo.querySelectorAll("div").forEach(d => {
      if(d.textContent.startsWith("Acertos:")) d.textContent = "Acertos: " + acertosJogo;
    });
  });
}

function gerar56Jogos(){
  if(!tabelaNumeros || Object.keys(tabelaNumeros).length===0){
    alert("Primeiro gere a tabela!");
    return;
  }
  const todas = gerarCombinacoes(letras,5);
  const container=document.getElementById("container");
  container.innerHTML="";
  let blocoDiv=null;

  todas.forEach((linhasJogo,i)=>{
    if(i%4===0){
      blocoDiv=document.createElement("div");
      blocoDiv.classList.add("bloco");
      container.appendChild(blocoDiv);
    }

    const jogoDiv=document.createElement("div");
    jogoDiv.classList.add("jogo");

    const numeroJogo=document.createElement("div");
    numeroJogo.style.fontWeight="bold";
    numeroJogo.style.marginBottom="5px";
    numeroJogo.style.textAlign="center";
    numeroJogo.textContent="Jogo "+(i+1);
    jogoDiv.appendChild(numeroJogo);

    const numerosUsados = new Set();
    let totalNumeros = 0;

    linhasJogo.forEach(l=>{
      const linhaDiv=document.createElement("div");
      linhaDiv.classList.add("linha",`line-${l}`);
      const labelDiv=document.createElement("div");
      labelDiv.classList.add("label");
      labelDiv.textContent=l;
      linhaDiv.appendChild(labelDiv);

      let numsDisponiveis = tabelaNumeros[l].filter(n=>!numerosUsados.has(n)).sort((a,b)=>a-b);

      numsDisponiveis.forEach(n=>{
        if(totalNumeros<50 && linhaDiv.childElementCount-1<13){
          const b=document.createElement("div");
          b.classList.add("ball");
          b.textContent=n;
          linhaDiv.appendChild(b);
          numerosUsados.add(n);
          totalNumeros++;
        }
      });

      jogoDiv.appendChild(linhaDiv);
    });

    const acertosDiv=document.createElement("div");
    acertosDiv.style.marginTop="5px";
    acertosDiv.style.fontWeight="bold";
    acertosDiv.textContent="Acertos: 0";
    jogoDiv.appendChild(acertosDiv);

    blocoDiv.appendChild(jogoDiv);
  });

  atualizarAcertos();
}

// Botões
document.getElementById("btnGenerate").addEventListener("click",()=>{
  criarTabela();
  criarInterfaceUltimoResultado();
});
document.getElementById("btnClear").addEventListener("click",()=>{
  document.getElementById("container").innerHTML="";
  document.getElementById("tabela").innerHTML="";
  document.getElementById("tabela").style.display="none";
  document.getElementById("numeroContainer").innerHTML="";
  tabelaNumeros={};
  ultimoResultado=Array(20).fill(null);
});
document.getElementById("btnComb").addEventListener("click",gerar56Jogos);
document.getElementById("btnSave").addEventListener("click",()=>{
  const jogos=Array.from(document.querySelectorAll("#container .jogo")).map(j=>j.innerHTML);
  if(jogos.length===0){alert("Não há jogos para salvar!"); return;}
  localStorage.setItem("lotomaniaJogos",JSON.stringify(jogos));
  alert("Jogos salvos!");
});
document.getElementById("btnLoad").addEventListener("click",()=>{
  const jogosSalvos=JSON.parse(localStorage.getItem("lotomaniaJogos"));
  if(!jogosSalvos||jogosSalvos.length===0){alert("Nenhum jogo salvo!"); return;}
  const container=document.getElementById("container");
  container.innerHTML="";
  let blocoDiv=document.createElement("div");
  blocoDiv.classList.add("bloco");
  container.appendChild(blocoDiv);
  jogosSalvos.forEach(html=>{
    const jogoDiv=document.createElement("div");
    jogoDiv.classList.add("jogo");
    jogoDiv.innerHTML=html;
    blocoDiv.appendChild(jogoDiv);
  });
  atualizarAcertos();
});
document.getElementById("btnToggleTabela").addEventListener("click",()=>{
  const tabelaDiv=document.getElementById("tabela");
  if(tabelaDiv.style.display==="none"||tabelaDiv.style.display===""){
    tabelaDiv.style.display="flex";
    document.getElementById("btnToggleTabela").textContent="Ocultar Tabela";
  }else{
    tabelaDiv.style.display="none";
    document.getElementById("btnToggleTabela").textContent="Mostrar Tabela";
  }
});
document.getElementById("tabela").style.display="none";
</script>
</body>
</html>
